<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Vacation Timer</title>
  <style>
    html, body, canvas {
      width: 100%;
      height: 100%;
      margin: 0px;
      padding: 0px;
      background: black;
      overflow: hidden;
    }
  </style>
  <meta http-equiv="refresh" content="600">
</head>
<body>
  <script>

    // canvas setup
    var canvas = document.createElement('canvas');
    canvas.id = "canvas";
    document.body.appendChild(canvas);
    var ctx = canvas.getContext("2d");

    // settings
    var scrollSpeed = 0.1; // px per ms
    var tileWidth = 800;
    var tileHeight = 200;
    var textMargin = 5;
    var tiles = [];

    tiles.push(new Employee("Ryan Mathewson", "black",    "#FFCD00",  281.5,    new Date("2017-06-23"),  19));
    tiles.push(new Employee("John Gettel",    "black",    "#FF00FF",  152.5500, new Date("2017-06-18"),  24));
    tiles.push(new Employee("Chris Mikola",   "#8E44AD",  "white",    108.98,   new Date("2017-06-30"),  24));
    tiles.push(new Employee("Jason Farlow",   "black",    "green",    65.74,    new Date("2017-06-18"),  19));
    tiles.push(new Employee("Derek Lauer",    "#808080",  "green",    43.86,    new Date("2017-06-20"),  16));
    tiles.push(new Employee("Mike Legg",      "red",      "white",    239.57,   new Date("2017-07-5"),   24));
    tiles.push(new Employee("Andrew Hoyt",    "black",    "white",    96.82,    new Date("2017-07-2"),   19));
    tiles.push(new Employee("Andy Knapp",     "black",    "green",    284.13,   new Date("2017-07-2"),   24));
    tiles.push(new Employee("Co-ops",         "black",    "white",    0,        new Date("2017-06-23"),   0));

    // working variables
    var leftEdge = 0;
    var lastDrawTime = Date.now();
    var leftMostTileIndex = 0;

    function Draw() {

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      var msSincelastDrawTime = Date.now() - lastDrawTime;
      var delta = scrollSpeed * msSincelastDrawTime;
      leftEdge -= delta;

      while (leftEdge < -tileWidth) {
        leftEdge += tileWidth;
        leftMostTileIndex++;
      }
      leftMostTileIndex = leftMostTileIndex % tiles.length

      tiles.sort(function (a, b) { return (a.pto < b.pto) ? 1 : ((b.pto > a.pto) ? -1 : 0); });

      // Draw
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      var x = leftEdge;
      var i = leftMostTileIndex;
      while (x < (canvas.width + tileWidth)) {
        if (i >= tiles.length)
          i = 0;

        var tile = tiles[i];
        ctx.fillStyle = tile.background;
        ctx.fillRect(x, 0, tileWidth, tileHeight);
        ctx.font = "90px Arial";
        ctx.fillStyle = tile.foreground;
        ctx.fillText(tile.name, x + textMargin, 80);
        var yearsSinceStart = ((Date.now() - tile.startdate) / 1000.0 / 60.0 / 60.0 / 24.0 / 365.0);
        var hours = tile.pto + (yearsSinceStart * tile.rate);
        var minutes = (hours % 1) * 60.0;
        var seconds = (minutes % 1) * 60.0;
        var milliseconds = (seconds % 1) * 1000;
        //ctx.fillText(hours.toFixed(7), x + textMargin, 180);
        ctx.fillText(Math.floor(hours) + ":" + ("00" + Math.floor(minutes)).substr(-2, 2) + ":" + ("00" + Math.floor(seconds)).substr(-2, 2) + "." + ("000" + Math.floor(milliseconds)).substr(-3, 3), x + textMargin, 180);


        x += tileWidth;
        i++;
      }


      lastDrawTime = Date.now();
      requestAnimationFrame(Draw);
    }

    requestAnimationFrame(Draw);


    function Employee(name, background, foreground, pto, startdate, rate) {
      this.name = name;
      this.background = background;
      this.foreground = foreground;
      this.pto = pto;
      this.startdate = startdate;
      this.rate = rate;
    }

  </script>
</body>
</html>